{% load static %}
<!DOCTYPE html>
<html lang="fr" class="h-full bg-neutral-100">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}BoliBana Stock{% endblock %}</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="{% static 'img/favicon.svg' %}">
    
    <!-- Google Fonts - Montserrat -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <!-- Tailwind CSS CDN avec configuration personnalisée -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'bolibana': {
                            50: '#E8EBF0',
                            100: '#D1D7E1',
                            200: '#A3AFC3',
                            300: '#7587A5',
                            400: '#475F87',
                            500: '#2B3A67',
                            600: '#223052',
                            700: '#1A253E',
                            800: '#111A29',
                            900: '#090D15',
                        },
                        'gold': {
                            50: '#FFFEF0',
                            100: '#FFFDE0',
                            200: '#FFFBC1',
                            300: '#FFD700',
                            400: '#E6C200',
                            500: '#CCAD00',
                            600: '#B39900',
                            700: '#998500',
                            800: '#807100',
                            900: '#665D00',
                        },
                        'forest': {
                            50: '#E8F5E9',
                            100: '#C8E6C9',
                            200: '#A5D6A7',
                            300: '#81C784',
                            400: '#66BB6A',
                            500: '#4CAF50',
                            600: '#43A047',
                            700: '#388E3C',
                            800: '#2E8B57',
                            900: '#1B5E20',
                        },
                    },
                },
            },
        }
    </script>
    
    <!-- Tailwind CSS Local (fallback si CDN ne charge pas) -->
    <link href="{% static 'css/dist/output.css' %}?v=2.3" rel="stylesheet" id="tailwind-css">
    <!-- Fallback inline styles si le CSS ne charge pas -->
    <style id="fallback-styles">
        /* Styles de base pour éviter l'affichage sans style */
        body { font-family: 'Montserrat', system-ui, sans-serif; background-color: #F5F5F5 !important; }
        .bg-neutral-100 { background-color: #F5F5F5 !important; }
        .bg-white { background-color: #FFFFFF !important; }
        .rounded-xl { border-radius: 0.75rem !important; }
        .shadow-md { box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1) !important; }
        .border-l-4 { border-left-width: 4px !important; }
        .border-bolibana-500 { border-left-color: #2B3A67 !important; }
        .border-gold-500 { border-left-color: #FFD700 !important; }
        .border-red-500 { border-left-color: #EF4444 !important; }
        .border-forest-500 { border-left-color: #2E8B57 !important; }
    </style>
    <script>
        // Vérifier si le CSS Tailwind est chargé
        document.addEventListener('DOMContentLoaded', function() {
            const tailwindLink = document.getElementById('tailwind-css');
            const fallbackStyles = document.getElementById('fallback-styles');
            
            // Vérifier après 1 seconde si le CSS est chargé
            setTimeout(function() {
                const testEl = document.createElement('div');
                testEl.className = 'bg-neutral-100';
                testEl.style.position = 'absolute';
                testEl.style.visibility = 'hidden';
                document.body.appendChild(testEl);
                
                const computedStyle = window.getComputedStyle(testEl);
                const bgColor = computedStyle.backgroundColor;
                
                // Si le background n'est pas #F5F5F5, le CSS Tailwind n'est pas chargé
                if (bgColor !== 'rgb(245, 245, 245)') {
                    console.warn('Tailwind CSS non chargé, utilisation des styles de fallback');
                    // Les styles inline sont déjà actifs
                } else {
                    console.log('Tailwind CSS chargé correctement');
                    // Masquer les styles de fallback si Tailwind est chargé
                    fallbackStyles.disabled = true;
                }
                
                document.body.removeChild(testEl);
            }, 1000);
        });
    </script>
    
    <!-- Styles globaux pour les selects/dropdowns -->
    <style>
        /* Style global pour tous les selects - Padding amélioré */
        select,
        select.form-control,
        select.form-select,
        .form-group select {
            padding: 0.625rem 2.75rem 0.625rem 0.75rem !important;
            min-height: 2.5rem;
        }
        
        /* Assurer un padding suffisant pour les selects dans tous les contextes */
        select:not([class*="form-select-custom"]) {
            padding-top: 0.625rem !important;
            padding-bottom: 0.625rem !important;
            padding-left: 0.75rem !important;
            padding-right: 2.75rem !important;
        }
    </style>
    
    {% block extra_css %}{% endblock %}
</head>
<body class="h-full font-sans flex flex-col min-h-screen bg-neutral-100">
    <div class="flex flex-col min-h-screen bg-neutral-100">
        <!-- Header simplifié -->
        {% block header %}
        <header class="bg-bolibana-500 shadow-lg">
            <div class="mx-auto max-w-[1920px] px-4 sm:px-6 lg:px-8">
                <div class="flex h-16 items-center justify-between">
                    <!-- Logo -->
                    <div class="flex-shrink-0">
                        <a href="{% url 'home' %}" class="flex items-center space-x-3 group">
                            <img class="h-10 w-10 sm:h-12 sm:w-12 transform group-hover:scale-105 transition-transform duration-200" src="{% static 'img/logo.svg' %}" alt="BoliBana Stock">
                            <span class="text-lg sm:text-xl font-semibold text-white group-hover:text-gold-300 transition-colors duration-200">BoliBana Stock</span>
                        </a>
                    </div>
                    
                    <!-- Actions utilisateur -->
                    <div class="flex items-center space-x-3 sm:space-x-4">
                                {% if user.is_authenticated %}
                                    <!-- Notifications -->
                                    <button type="button" class="relative rounded-full bg-bolibana-600 p-2 text-white hover:bg-bolibana-700 focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-bolibana-600 transition-colors duration-200" id="notifications-button">
                                        <span class="sr-only">Voir les notifications</span>
                                        <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M14.857 17.082a23.848 23.848 0 005.454-1.31A8.967 8.967 0 0118 9.75v-.7V9A6 6 0 006 9v.75a8.967 8.967 0 01-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 01-5.714 0m5.714 0a3 3 0 11-5.714 0" />
                                        </svg>
                                        <!-- Notification badge -->
                                        <span class="absolute -top-0.5 -right-0.5 h-3 w-3 bg-red-500 rounded-full border border-white"></span>
                                    </button>

                                    <!-- Profile dropdown -->
                                    <div class="relative">
                                        <button type="button" class="flex items-center rounded-full bg-bolibana-600 text-sm focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-bolibana-600 transition-colors duration-200" id="user-menu-button">
                                            <span class="sr-only">Ouvrir le menu utilisateur</span>
                                            <img class="h-8 w-8 rounded-full" src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80" alt="">
                                        </button>
                                        <!-- Dropdown menu -->
                                        <div class="absolute right-0 z-50 mt-2 w-48 rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none hidden" id="user-menu-dropdown">
                                            <a href="{% url 'core:configuration' %}" class="block px-4 py-2 text-sm text-neutral-700 hover:bg-neutral-100 transition-colors duration-150">
                                                <i class="fas fa-building mr-2"></i>Configuration
                                            </a>
                                            {% if user.is_superuser or user.is_site_admin %}
                                            <a href="{% url 'core:user_list' %}" class="block px-4 py-2 text-sm text-neutral-700 hover:bg-neutral-100 transition-colors duration-150">
                                                <i class="fas fa-users mr-2"></i>Gestion utilisateurs
                                            </a>
                                            {% endif %}
                                            {% if user.is_superuser %}
                                            <a href="{% url 'core:settings' %}" class="block px-4 py-2 text-sm text-neutral-700 hover:bg-neutral-100 transition-colors duration-150">
                                                <i class="fas fa-cog mr-2"></i>Paramètres avancés
                                            </a>
                                            {% endif %}
                                            <div class="border-t border-gray-100 my-1"></div>
                                            <a href="{% url 'logout' %}" class="block px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors duration-150">
                                                <i class="fas fa-sign-out-alt mr-2"></i>Déconnexion
                                            </a>
                                        </div>
                                    </div>
                                {% else %}
                                    <!-- Login button -->
                            <a href="{% url 'login' %}" class="inline-flex items-center px-3 sm:px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-bolibana-600 hover:bg-bolibana-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-bolibana-500 transition-colors duration-200">
                                <i class="fas fa-sign-in-alt mr-2"></i><span class="hidden sm:inline">Connexion</span>
                                    </a>
                                {% endif %}
                    </div>
                </div>
            </div>
        </header>
        {% endblock header %}

        <!-- Main content avec sidebar -->
        <main class="flex-grow bg-neutral-100">
            {% block full_content %}
            <div class="mx-auto max-w-[1920px] py-6 sm:px-6 lg:px-8">
                {% if messages %}
                    {% for message in messages %}
                        <div class="rounded-md p-4 mb-4 {% if message.tags == 'success' %}bg-forest-50 text-forest-700{% elif message.tags == 'error' %}bg-red-50 text-red-700{% elif message.tags == 'warning' %}bg-gold-50 text-gold-700{% else %}bg-bolibana-50 text-bolibana-700{% endif %}">
                            {{ message }}
                        </div>
                    {% endfor %}
                {% endif %}

                <div class="flex flex-col lg:flex-row gap-6">
                    <!-- Sidebar de navigation -->
                    {% include 'partials/sidebar.html' %}
                    
                    <!-- Contenu principal -->
                    <div class="flex-1">
                {% block content %}{% endblock %}
                    </div>
                </div>
            </div>
            {% endblock full_content %}
        </main>

        <!-- Footer -->
        {% block footer %}
        <footer class="bg-bolibana-500 text-white mt-auto">
            <div class="mx-auto max-w-7xl px-4 py-8 sm:px-6 lg:px-8">
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                    <!-- À propos -->
                    <div class="space-y-4">
                        <h3 class="text-lg font-semibold text-gold-300">Notre Mission</h3>
                        <p class="text-sm text-neutral-200">
                            BoliBana Stock est une solution de gestion d'entreprise innovante, spécialisée dans la gestion de stock, de caisse et de clients pour les commerçants. BoliBana Stock simplifie la gestion quotidienne des commerçants en transformant leur smartphone en outil de gestion complet.
                        </p>
                        <p class="text-xs text-neutral-300 italic">
                            L'application s'adresse principalement aux commerçants indépendants, aux propriétaires de petites et moyennes boutiques (détail, épicerie, alimentation) et aux gestionnaires de stocks.
                        </p>
                    </div>

                    <!-- Applications -->
                    <div class="space-y-4">
                        <h3 class="text-lg font-semibold text-gold-300">Applications</h3>
                        <div class="space-y-3">
                            <!-- Application Web -->
                            <a href="/" class="flex items-center space-x-3 p-2 rounded-lg bg-bolibana-600 hover:bg-bolibana-700 transition-colors">
                                <svg class="h-6 w-6 text-gold-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"/>
                                </svg>
                                <div>
                                    <p class="text-sm font-medium text-white">Application Web</p>
                                    <p class="text-xs text-neutral-300">Accès en ligne</p>
                                </div>
                            </a>
                            
                            <!-- Application Mobile iOS -->
                            <a href="https://apps.apple.com/us/app/bolibana-stock/id6755696074" target="_blank" rel="noopener noreferrer" class="flex items-center space-x-3 p-2 rounded-lg bg-bolibana-600 hover:bg-bolibana-700 transition-colors">
                                <svg class="h-6 w-6 text-gold-300" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M17.05 20.28c-.98.95-2.05.88-3.08.4-1.09-.5-2.08-.48-3.24 0-1.44.62-2.2.44-3.06-.4C1.79 15.25 4.23 7.59 9.03 7.31c1.35.07 2.29.74 3.08.8 1.18-.24 2.31-.93 3.57-.84 1.51.12 2.65.72 3.4 1.8-3.12 1.87-2.38 5.98.48 7.13-.57 1.5-1.31 2.99-2.54 4.09l.01-.01zM12.03 7.25c-.15-2.23 1.66-4.07 3.74-4.25.29 2.58-2.34 4.5-3.74 4.25z"/>
                                </svg>
                                <div>
                                    <p class="text-sm font-medium text-white">App iOS</p>
                                    <p class="text-xs text-neutral-300">Télécharger sur App Store</p>
                                </div>
                            </a>
                            
                            <!-- Application Mobile Android -->
                            <a href="https://play.google.com/store/apps/details?id=com.bolibanastock.mobile" target="_blank" rel="noopener noreferrer" class="flex items-center space-x-3 p-2 rounded-lg bg-bolibana-600 hover:bg-bolibana-700 transition-colors">
                                <svg class="h-6 w-6 text-gold-300" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M17.523 15.3414c-.5511 0-.9993-.4486-.9993-.9997s.4482-.9993.9993-.9993c.5511 0 .9993.4482.9993.9993.0001.5511-.4482.9997-.9993.9997m-11.046 0c-.5511 0-.9993-.4486-.9993-.9997s.4482-.9993.9993-.9993c.551 0 .9993.4482.9993.9993 0 .5511-.4482.9997-.9993.9997m11.4045-6.0288l1.9973-3.4592a.416.416 0 00-.1521-.5676.416.416 0 00-.5676.1521l-2.0223 3.503C15.5902 8.2439 13.8533 7.5758 11.9796 7.5758s-3.6106.6681-4.903.9144L4.9649 4.9872a.4161.4161 0 00-.5676-.1521.4157.4157 0 00-.1521.5676l1.9973 3.4592C2.6889 11.186.8535 12.3074.8535 13.7408c0 .7492.4245 1.4483 1.1556 1.7579l-.3889 2.3148a.4156.4156 0 00.4102.4767h.0211a.4163.4163 0 00.407-.3349l.3506-2.0907c.9118.3208 1.8996.4962 2.9308.4962 3.6307 0 6.7013-2.1966 7.7924-5.1403l3.7728 1.3513a2.1094 2.1094 0 001.5432-.0808c.4996-.2498.8672-.6921 1.0244-1.2244l.7157-2.6405c.0956-.2912-.0196-.6088-.2698-.7916a.6907.6907 0 00-.7852-.0335l-4.563 2.7218a10.588 10.588 0 00-1.1702-.5848l-.003-.0016z"/>
                                </svg>
                                <div>
                                    <p class="text-sm font-medium text-white">App Android</p>
                                    <p class="text-xs text-neutral-300">Télécharger sur Play Store</p>
                                </div>
                            </a>
                        </div>
                    </div>

                    <!-- Fonctionnalités -->
                    <div class="space-y-4">
                        <h3 class="text-lg font-semibold text-gold-300">Fonctionnalités</h3>
                        <ul class="space-y-2 text-sm">
                            <li class="flex items-center space-x-2 text-neutral-200">
                                <svg class="h-5 w-5 text-gold-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"/>
                                </svg>
                                <span>Gestion des stocks en temps réel</span>
                            </li>
                            <li class="flex items-center space-x-2 text-neutral-200">
                                <svg class="h-5 w-5 text-gold-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"/>
                                </svg>
                                <span>Scanner de codes-barres intégré</span>
                            </li>
                            <li class="flex items-center space-x-2 text-neutral-200">
                                <svg class="h-5 w-5 text-gold-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
                                </svg>
                                <span>Suivi des ventes et analyses</span>
                            </li>
                            <li class="flex items-center space-x-2 text-neutral-200">
                                <svg class="h-5 w-5 text-gold-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"/>
                                </svg>
                                <span>Gestion clients et crédit</span>
                            </li>
                            <li class="flex items-center space-x-2 text-neutral-200">
                                <svg class="h-5 w-5 text-gold-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                </svg>
                                <span>Alertes de stock bas</span>
                            </li>
                            <li class="flex items-center space-x-2 text-neutral-200">
                                <svg class="h-5 w-5 text-gold-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"/>
                                </svg>
                                <span>Programme de fidélité</span>
                            </li>
                            <li class="flex items-center space-x-2 text-neutral-200">
                                <svg class="h-5 w-5 text-gold-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"/>
                                </svg>
                                <span>Impression d'étiquettes</span>
                            </li>
                            <li class="flex items-center space-x-2 text-neutral-200">
                                <svg class="h-5 w-5 text-gold-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/>
                                </svg>
                                <span>Multi-site et synchronisation cloud</span>
                            </li>
                        </ul>
                    </div>

                    <!-- Contact -->
                    <div class="space-y-4">
                        <h3 class="text-lg font-semibold text-gold-300">Contact</h3>
                        <ul class="space-y-2 text-sm text-neutral-200">
                            <li class="flex items-center space-x-2">
                                <svg class="h-5 w-5 text-gold-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
                                </svg>
                                <a href="mailto:bolibanastock@gmail.com" class="hover:text-gold-300 transition-colors">bolibanastock@gmail.com</a>
                            </li>
                            <li class="flex items-center space-x-2">
                                <svg class="h-5 w-5 text-gold-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
                                </svg>
                                <a href="tel:+22372464294" class="hover:text-gold-300 transition-colors">+223 72 46 42 94</a>
                            </li>
                            <li class="flex items-center space-x-2">
                                <svg class="h-5 w-5 text-gold-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/>
                                </svg>
                                <span>Bamako, Mali</span>
                            </li>
                        </ul>
                    </div>
                </div>

                <!-- Copyright -->
                <div class="mt-8 pt-4 border-t border-bolibana-400">
                    <p class="text-center text-sm text-neutral-200">
                        © {% now "Y" %} BoliBana Stock - Solution de gestion de Stock • Caisse • Client (app web et Mobile)
                    </p>
                </div>
            </div>
        </footer>
        {% endblock footer %}
    </div>

    <!-- Menu mobile -->
    {% include 'partials/mobile_menu.html' %}

    {% block extra_js %}
    <script>
    
    // Menu déroulant du profil utilisateur
    (function() {
        const userMenuButton = document.getElementById('user-menu-button');
        const userMenuDropdown = document.getElementById('user-menu-dropdown');
        
        if (userMenuButton && userMenuDropdown) {
            userMenuButton.addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation();
                
                const isHidden = userMenuDropdown.classList.contains('hidden');
                
                if (isHidden) {
                    userMenuDropdown.classList.remove('hidden');
                } else {
                    userMenuDropdown.classList.add('hidden');
                }
            });
            
            // Fermer le menu en cliquant ailleurs
            document.addEventListener('click', function(event) {
                if (!userMenuButton.contains(event.target) && !userMenuDropdown.contains(event.target)) {
                    userMenuDropdown.classList.add('hidden');
                }
            });
            
            // Fermer avec la touche Escape
            document.addEventListener('keydown', function(event) {
                if (event.key === 'Escape') {
                    userMenuDropdown.classList.add('hidden');
                }
            });
        }
    })();

    // Fonctionnalité des notifications
    (function() {
        const notificationsButton = document.getElementById('notifications-button');
        
        if (notificationsButton) {
            notificationsButton.addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation();
                
                // Supprimer les notifications existantes
                const existingNotifications = document.querySelectorAll('.notification-toast');
                existingNotifications.forEach(notification => notification.remove());
                
                // Calculer la position optimale
                const buttonRect = notificationsButton.getBoundingClientRect();
                const viewportWidth = window.innerWidth;
                const viewportHeight = window.innerHeight;
                
                // Position par défaut
                let top = Math.max(20, buttonRect.bottom + 10);
                let right = Math.max(16, viewportWidth - buttonRect.right);
                
                // Ajuster si la notification dépasse en bas
                if (top + 120 > viewportHeight) {
                    top = Math.max(20, buttonRect.top - 130);
                }
                
                // Ajuster si la notification dépasse à droite
                if (right + 320 > viewportWidth) {
                    right = 16;
                }
                
                // Créer la notification
                const notification = document.createElement('div');
                notification.className = 'notification-toast fixed bg-white border border-neutral-200 rounded-lg shadow-xl p-4 z-50 max-w-sm';
                notification.style.top = top + 'px';
                notification.style.right = right + 'px';
                notification.style.maxWidth = '320px';
                notification.style.minWidth = '280px';
                
                notification.innerHTML = `
                    <div class="flex items-start">
                        <div class="flex-shrink-0">
                            <svg class="h-6 w-6 text-bolibana-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                            </svg>
                        </div>
                        <div class="ml-3 w-0 flex-1">
                            <p class="text-sm font-medium text-neutral-900">Notifications</p>
                            <p class="mt-1 text-sm text-neutral-500">Aucune nouvelle notification pour le moment.</p>
                        </div>
                        <div class="ml-4 flex flex-shrink-0">
                            <button type="button" class="inline-flex text-neutral-400 hover:text-neutral-600 focus:outline-none focus:text-neutral-600 transition-colors duration-150" onclick="this.closest('.notification-toast').remove()">
                                <span class="sr-only">Fermer</span>
                                <svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                    <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" />
                                </svg>
                            </button>
                        </div>
                    </div>
                `;
                
                // Ajouter l'animation d'entrée
                notification.style.opacity = '0';
                notification.style.transform = 'translateY(-10px) scale(0.95)';
                notification.style.transition = 'all 0.2s ease-out';
                
                document.body.appendChild(notification);
                
                // Animer l'entrée
                requestAnimationFrame(() => {
                    notification.style.opacity = '1';
                    notification.style.transform = 'translateY(0) scale(1)';
                });
                
                // Auto-remove après 5 secondes
                setTimeout(() => {
                    if (notification.parentElement) {
                        notification.style.opacity = '0';
                        notification.style.transform = 'translateY(-10px) scale(0.95)';
                        setTimeout(() => {
                            if (notification.parentElement) {
                                notification.remove();
                            }
                        }, 200);
                    }
                }, 5000);
                
                // Fermer en cliquant sur l'arrière-plan
                notification.addEventListener('click', function(e) {
                    if (e.target === notification) {
                        notification.remove();
                    }
                });
                
                // Fermer avec Escape
                const handleEscape = function(e) {
                    if (e.key === 'Escape') {
                        notification.remove();
                        document.removeEventListener('keydown', handleEscape);
                    }
                };
                document.addEventListener('keydown', handleEscape);
            });
        }
    })();


    </script>
    {% endblock %}
</body>
</html> 