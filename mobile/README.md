# BoliBana Stock Mobile App (React Native)

## üöÄ Technologies Utilis√©es

- **Frontend Mobile**: React Native
- **Backend**: Django REST Framework API
- **Authentification**: JWT (JSON Web Tokens)
- **Navigation**: React Navigation 6
- **√âtat Global**: Redux Toolkit
- **UI Components**: React Native Elements
- **Scanner Code-barres**: react-native-camera
- **Stockage Local**: AsyncStorage
- **HTTP Client**: Axios

## üìÅ Structure du Projet

```
BoliBanaStockMobile/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ components/          # Composants r√©utilisables
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ common/         # Composants g√©n√©riques
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ forms/          # Composants de formulaires
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ cards/          # Composants de cartes
‚îÇ   ‚îú‚îÄ‚îÄ screens/            # √âcrans de l'application
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth/           # √âcrans d'authentification
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dashboard/      # Tableau de bord
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ products/       # Gestion des produits
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ stock/          # Gestion du stock
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ sales/          # Gestion des ventes
‚îÇ   ‚îú‚îÄ‚îÄ navigation/         # Configuration de la navigation
‚îÇ   ‚îú‚îÄ‚îÄ services/           # Services API
‚îÇ   ‚îú‚îÄ‚îÄ store/              # Redux store
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ slices/         # Redux slices
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ middleware/     # Middleware Redux
‚îÇ   ‚îú‚îÄ‚îÄ utils/              # Utilitaires
‚îÇ   ‚îú‚îÄ‚îÄ constants/          # Constantes
‚îÇ   ‚îî‚îÄ‚îÄ types/              # Types TypeScript
‚îú‚îÄ‚îÄ assets/                 # Images, fonts, etc.
‚îú‚îÄ‚îÄ android/                # Configuration Android
‚îú‚îÄ‚îÄ ios/                    # Configuration iOS
‚îî‚îÄ‚îÄ App.tsx                 # Point d'entr√©e
```

## üõ†Ô∏è Installation et Configuration

### Pr√©requis
```bash
# Installer Node.js (version 16+)
# Installer React Native CLI
npm install -g @react-native-community/cli

# Installer Android Studio (pour Android)
# Installer Xcode (pour iOS - Mac uniquement)
```

### Cr√©ation du projet
```bash
# Cr√©er le projet React Native avec TypeScript
npx react-native init BoliBanaStockMobile --template react-native-template-typescript

# Aller dans le dossier du projet
cd BoliBanaStockMobile

# Installer les d√©pendances principales
npm install

# D√©pendances de navigation
npm install @react-navigation/native @react-navigation/stack @react-navigation/bottom-tabs
npm install react-native-screens react-native-safe-area-context

# D√©pendances Redux
npm install @reduxjs/toolkit react-redux

# D√©pendances UI
npm install react-native-elements react-native-vector-icons
npm install react-native-vector-icons

# D√©pendances pour le scan et les permissions
npm install react-native-camera react-native-permissions
npm install react-native-vision-camera

# D√©pendances pour le stockage et les requ√™tes
npm install @react-native-async-storage/async-storage
npm install axios

# D√©pendances utilitaires
npm install react-native-gesture-handler
npm install react-native-reanimated
npm install react-native-svg
npm install react-native-image-picker
```

### Configuration Android
```bash
# Dans android/app/build.gradle, ajouter :
android {
    defaultConfig {
        missingDimensionStrategy 'react-native-camera', 'general'
    }
}

# Dans android/settings.gradle, ajouter :
include ':react-native-vector-icons'
project(':react-native-vector-icons').projectDir = new File(rootProject.projectDir, '../node_modules/react-native-vector-icons/android')
```

### Configuration iOS
```bash
cd ios
pod install
cd ..
```

## üîß Configuration API

### services/api.ts
```typescript
import axios, { AxiosInstance, AxiosRequestConfig } from 'axios';
import AsyncStorage from '@react-native-async-storage/async-storage';

const API_BASE_URL = 'http://localhost:8000/api/v1';

class ApiService {
  private api: AxiosInstance;

  constructor() {
    this.api = axios.create({
      baseURL: API_BASE_URL,
      headers: {
        'Content-Type': 'application/json',
      },
      timeout: 10000,
    });

    this.setupInterceptors();
  }

  private setupInterceptors() {
    // Intercepteur pour ajouter le token d'authentification
    this.api.interceptors.request.use(
      async (config) => {
        const token = await AsyncStorage.getItem('access_token');
        if (token) {
          config.headers.Authorization = `Bearer ${token}`;
        }
        return config;
      },
      (error) => {
        return Promise.reject(error);
      }
    );

    // Intercepteur pour g√©rer les erreurs de token
    this.api.interceptors.response.use(
      (response) => response,
      async (error) => {
        if (error.response?.status === 401) {
          // Token expir√©, essayer de le rafra√Æchir
          const refreshToken = await AsyncStorage.getItem('refresh_token');
          if (refreshToken) {
            try {
              const response = await this.refreshToken(refreshToken);
              const newToken = response.data.access_token;
              await AsyncStorage.setItem('access_token', newToken);
              
              // Retenter la requ√™te originale
              error.config.headers.Authorization = `Bearer ${newToken}`;
              return this.api.request(error.config);
            } catch (refreshError) {
              // Refresh token expir√©, d√©connexion
              await this.logout();
            }
          }
        }
        return Promise.reject(error);
      }
    );
  }

  // M√©thodes d'authentification
  async login(username: string, password: string) {
    return this.api.post('/auth/login/', { username, password });
  }

  async refreshToken(refreshToken: string) {
    return this.api.post('/auth/refresh/', { refresh: refreshToken });
  }

  async logout() {
    await AsyncStorage.multiRemove(['access_token', 'refresh_token', 'user']);
  }

  // M√©thodes pour les produits
  async getProducts(params?: any) {
    return this.api.get('/products/', { params });
  }

  async getProduct(id: number) {
    return this.api.get(`/products/${id}/`);
  }

  async scanProduct(code: string) {
    return this.api.post('/products/scan/', { code });
  }

  async updateStock(productId: number, quantity: number, notes?: string) {
    return this.api.post(`/products/${productId}/update_stock/`, {
      quantity,
      notes,
    });
  }

  // M√©thodes pour le tableau de bord
  async getDashboard() {
    return this.api.get('/dashboard/');
  }

  // M√©thodes pour les transactions
  async getTransactions(params?: any) {
    return this.api.get('/transactions/', { params });
  }

  async createTransaction(data: any) {
    return this.api.post('/transactions/', data);
  }

  // M√©thodes pour les ventes
  async getSales(params?: any) {
    return this.api.get('/sales/', { params });
  }

  async createSale(data: any) {
    return this.api.post('/sales/', data);
  }
}

export default new ApiService();
```

## üì± √âcrans Principaux

### 1. Login Screen
```typescript
import React, { useState } from 'react';
import {
  View,
  StyleSheet,
  Alert,
  KeyboardAvoidingView,
  Platform,
} from 'react-native';
import { Input, Button, Text } from 'react-native-elements';
import { useDispatch } from 'react-redux';
import { login } from '../store/slices/authSlice';
import api from '../services/api';

const LoginScreen = ({ navigation }) => {
  const [username, setUsername] = useState('');
  const [password, setPassword] = useState('');
  const [loading, setLoading] = useState(false);
  const dispatch = useDispatch();

  const handleLogin = async () => {
    if (!username || !password) {
      Alert.alert('Erreur', 'Veuillez remplir tous les champs');
      return;
    }

    setLoading(true);
    try {
      const response = await api.login(username, password);
      const { access_token, refresh_token, user } = response.data;
      
      dispatch(login({ user, access_token, refresh_token }));
    } catch (error) {
      Alert.alert('Erreur', 'Identifiants invalides');
    } finally {
      setLoading(false);
    }
  };

  return (
    <KeyboardAvoidingView
      behavior={Platform.OS === 'ios' ? 'padding' : 'height'}
      style={styles.container}
    >
      <View style={styles.content}>
        <Text h3 style={styles.title}>
          BoliBana Stock
        </Text>
        
        <Input
          placeholder="Nom d'utilisateur"
          value={username}
          onChangeText={setUsername}
          autoCapitalize="none"
          leftIcon={{ type: 'font-awesome', name: 'user' }}
        />
        
        <Input
          placeholder="Mot de passe"
          value={password}
          onChangeText={setPassword}
          secureTextEntry
          leftIcon={{ type: 'font-awesome', name: 'lock' }}
        />
        
        <Button
          title="Se connecter"
          onPress={handleLogin}
          loading={loading}
          containerStyle={styles.buttonContainer}
        />
      </View>
    </KeyboardAvoidingView>
  );
};

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: '#f5f5f5',
  },
  content: {
    flex: 1,
    justifyContent: 'center',
    padding: 20,
  },
  title: {
    textAlign: 'center',
    marginBottom: 30,
    color: '#2c3e50',
  },
  buttonContainer: {
    marginTop: 20,
  },
});

export default LoginScreen;
```

### 2. Dashboard Screen
- Statistiques du stock en temps r√©el
- Produits en alerte de stock
- Transactions r√©centes
- Acc√®s rapide aux fonctionnalit√©s principales

### 3. Products Screen
- Liste des produits avec pagination
- Recherche et filtres avanc√©s
- Scan de code-barres int√©gr√©
- D√©tails complets des produits

### 4. Stock Management Screen
- Mise √† jour des quantit√©s en temps r√©el
- Historique des transactions
- Alertes de stock automatiques
- Gestion des entr√©es/sorties

### 5. Sales Screen
- Cr√©ation de ventes rapides
- Historique des ventes
- Rapports de vente
- Gestion des clients

## üîç Fonctionnalit√©s Cl√©s

### Scan de Code-barres
```typescript
import { Camera, useCameraDevices } from 'react-native-vision-camera';

const BarcodeScanner = ({ onScan, onClose }) => {
  const devices = useCameraDevices();
  const device = devices.back;

  const handleBarCodeRead = (event) => {
    onScan(event.data);
  };

  if (!device) {
    return <Text>Chargement de la cam√©ra...</Text>;
  }

  return (
    <View style={styles.container}>
      <Camera
        style={StyleSheet.absoluteFill}
        device={device}
        isActive={true}
        frameProcessor={frameProcessor}
        frameProcessorFps={5}
      />
      <View style={styles.overlay}>
        <View style={styles.scanArea} />
      </View>
      <Button title="Fermer" onPress={onClose} />
    </View>
  );
};
```

### Synchronisation Hors-ligne
- Stockage local avec AsyncStorage
- Synchronisation automatique quand la connexion est r√©tablie
- Gestion des conflits de donn√©es
- Mode hors-ligne complet

### Notifications Push
- Alertes de stock faible en temps r√©el
- Notifications de nouvelles ventes
- Rappels d'inventaire automatiques
- Configuration personnalisable

## üöÄ D√©ploiement

### Android
```bash
# G√©n√©rer la cl√© de signature
cd android
./gradlew assembleRelease

# Installer sur l'appareil
adb install app/build/outputs/apk/release/app-release.apk
```

### iOS
```bash
# Configuration Xcode
cd ios
pod install

# Build pour release
npx react-native run-ios --configuration Release
```

## üîí S√©curit√©

- Chiffrement des donn√©es sensibles avec react-native-keychain
- Validation c√¥t√© client et serveur
- Gestion s√©curis√©e des tokens JWT
- Timeout automatique des sessions
- Protection contre les attaques XSS et CSRF

## ‚ö° Performance

- Lazy loading des images avec react-native-fast-image
- Pagination intelligente des listes
- Cache intelligent avec Redux Persist
- Optimisation des requ√™tes API
- Compression des donn√©es

## üìä Monitoring

- Crashlytics pour le suivi des erreurs
- Analytics pour les m√©triques d'utilisation
- Performance monitoring
- Logs d√©taill√©s pour le debugging

## üé® Design System

- Th√®me coh√©rent avec l'application web
- Composants r√©utilisables
- Support du mode sombre
- Accessibilit√© compl√®te
- Animations fluides

Cette architecture React Native vous permettra de cr√©er une application mobile performante et moderne qui s'int√®gre parfaitement avec votre backend Django ! üöÄ 